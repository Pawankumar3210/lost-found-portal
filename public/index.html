<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Lost & Found Campus Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Roboto&display=swap" rel="stylesheet">
<!-- Prevent Google Translate UI for this page -->
<meta name="google" content="notranslate">
<style>
/* ===========================
   Base styles
   =========================== */
* { box-sizing: border-box; margin:0; padding:0; font-family: 'Roboto', sans-serif; transition: all 0.3s ease; }
body { 
  background: linear-gradient(135deg, #b3e5fc 0%, #c5e1a5 25%, #b2dfdb 50%, #ce93d8 75%, #90caf9 100%);
  background-attachment: fixed;
  background-size: cover;
  color: #0D3B66;
  min-height: 100vh;
  position: relative;
}

/* Add smooth blended overlay for extra depth */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 50%, rgba(144, 202, 249, 0.4) 0%, transparent 60%),
    radial-gradient(circle at 80% 80%, rgba(206, 147, 216, 0.4) 0%, transparent 60%),
    radial-gradient(circle at 40% 20%, rgba(197, 225, 165, 0.4) 0%, transparent 60%),
    radial-gradient(circle at 60% 70%, rgba(178, 223, 219, 0.3) 0%, transparent 50%);
  pointer-events: none;
  z-index: -1;
}
h1,h2,h3 { font-family: 'Poppins', sans-serif; }

/* ===========================
   Header
   =========================== */
header {
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: white;
  display: flex;
  align-items: center;
  padding: 1rem 2rem;
  position: sticky;
  top:0;
  z-index: 1000;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
}
header h1 { 
  font-weight:700; 
  font-size:1.5rem; 
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  margin: 0;
}
.header-left { flex: 1; display: flex; align-items: center; }
.menu-btn { font-size:28px; cursor:pointer; background:none; border:none; color:white; }
.header-right { flex: 1; display:flex; align-items:center; justify-content:flex-end; gap:15px; }

/* ===========================
   Persistent sidebar toggle
   =========================== */
.sidebar-toggle {
  position: fixed;
  left: 12px;
  top: 18px;
  z-index: 2500;
  width:44px;
  height:44px;
  border-radius:10px;
  background: linear-gradient(90deg,#ffffff,#e6f0ff);
  border: none;
  box-shadow: 0 6px 18px rgba(0,0,0,0.15);
  cursor: pointer;
  font-size:22px;
  display:flex;
  align-items:center;
  justify-content:center;
}
body.dark .sidebar-toggle { background: linear-gradient(90deg,#2b2b2b,#1f1f1f); color:#fff; }

/* ===========================
   Theme toggle
   (unchanged visual structure)
   =========================== */
.theme-toggle {
  display: flex;
  align-items: center;
  background: #e0e0e0;
  border-radius: 50px;
  padding: 4px;
  position: relative;
  width: 320px;
  height: 50px;
  cursor: pointer;
}
.theme-slider {
  position: absolute;
  width: 50%;
  height: 42px;
  border-radius: 50px;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
.theme-slider.day { background: linear-gradient(90deg, #E91E63, #FF9800); left: 4px; }
.theme-slider.night { background: linear-gradient(90deg, #1E88E5, #283593); left: calc(50% - 4px); }
.theme-option { flex: 1; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 8px 15px; z-index: 2; font-weight: 600; font-size: 0.85rem; transition: all 0.3s ease; border-radius: 50px; }
.theme-option.active { color: white; }
.theme-option:not(.active) { color: #666; }
.theme-icon { font-size: 1.2rem; display: flex; align-items: center; justify-content: center; }

/* ===========================
   Dark mode overrides
   =========================== */
body.dark { background: #121212; color: #F0F4F8; }
body.dark header { background: linear-gradient(90deg,#1e1e1e,#333); }
body.dark .item-card { background:#1e1e1e; color:#F0F4F8; }
body.dark form { background:#1e1e1e; color:#F0F4F8; border:1px solid #333; }
body.dark form label { color:#F0F4F8; }
body.dark form input, 
body.dark form textarea, 
body.dark form select { 
  background: rgba(40,40,40,0.9); 
  color:#F0F4F8; 
  border-color: rgba(100,100,100,0.5); 
}
body.dark form input:focus, 
body.dark form textarea:focus, 
body.dark form select:focus { 
  background: rgba(50,50,50,0.95); 
  border-color:#00A6FB; 
}
body.dark form select { 
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23F0F4F8' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
}
body.dark #filterCard { background: linear-gradient(135deg,#333,#555); color:#F0F4F8; }
body.dark #filterSection { background: linear-gradient(135deg, rgba(50,50,50,0.9), rgba(70,70,70,0.9)); border-color: rgba(255,255,255,0.1); }
body.dark #searchInput { background: rgba(40,40,40,0.9); border-color: rgba(100,100,100,0.5); color: #F0F4F8; }
body.dark #searchInput:focus { background: rgba(50,50,50,0.95); border-color: #00A6FB; }
body.dark #filterSelect { background-color: rgba(50,50,50,0.95); color:#F0F4F8; }
body.dark #filterSelect:hover { background-color: rgba(60,60,60,0.95); }
body.dark h2 { color:#F0F4F8; }
body.dark h2::after { background: linear-gradient(90deg, #00A6FB, #2575fc); }

/* Make modals and share modal readable in dark mode */
body.dark .modal-content,
body.dark .share-modal-content,
body.dark .image-modal-content,
body.dark .login-modal-content,
body.dark .single-item-modal-content {
  background: #161616;
  color: #F0F4F8;
  border: 1px solid #333;
}
body.dark .modal-content p,
body.dark .modal-content strong {
  color: #F0F4F8;
}
body.dark .modal-content a {
  color: #4da6ff;
}
body.dark .modal-content a:hover {
  color: #66b3ff;
}
body.dark .login-form label { color:#F0F4F8; }
body.dark .login-form input { background:#2a2a2a; color:#F0F4F8; border-color:#444; }
body.dark .login-form input:focus { background:#333; border-color:#00A6FB; }
body.dark .single-item-content h3 { color:#F0F4F8; }
body.dark .single-item-content p { color:#e0e0e0; }
body.dark .item-info h3 { color:#F0F4F8; }

/* Dark mode: share option backgrounds & text color */
body.dark .share-option { background: linear-gradient(180deg,#262626,#1b1b1b); border-color: rgba(255,255,255,0.03); }
body.dark .share-option .share-text .share-title { color: #F0F4F8; }
body.dark .share-option .share-text .share-subtitle { color: #cfcfcf; }

/* ===========================
   Sidebar & navigation
   =========================== */
.sidebar { 
  height:100%; width:0; position:fixed; top:0; left:0; 
  background: linear-gradient(135deg, #2575fc, #6a11cb); 
  overflow-x:hidden; transition:0.4s; padding-top:70px; 
  z-index:2000; border-top-right-radius:12px; border-bottom-right-radius:12px; 
  box-shadow: 2px 0 10px rgba(0,0,0,0.2);
}
.sidebar.open { width:250px; } 
.sidebar a { 
  padding:15px 25px; 
  text-decoration:none; 
  font-size:18px; 
  color:#fff; 
  display:block; 
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
  border-radius:10px; 
  margin:6px 10px; 
  outline: none; 
  position: relative; 
  z-index: 2;
  border-left: 3px solid transparent;
}
.sidebar a:hover { 
  background: linear-gradient(90deg, rgba(252,92,125,0.9), rgba(106,130,251,0.9)); 
  transform: translateX(5px);
  border-left-color: rgba(255,255,255,0.8);
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
.sidebar a:active {
  transform: translateX(2px);
}
.sidebar a.report-link, .sidebar a.moderator-link { background:linear-gradient(90deg,#00A6FB,#0D3B66); font-weight:bold; font-size:19px; text-align:center; }

/* ===========================
   Report button - remove old pulse/glow pseudo animations
   and apply the NEW, stronger neon-blue hover glow (#00CFFF)
   =========================== */
.sidebar a.report-link, .sidebar a.moderator-link { overflow: visible; }

/* keep pseudo elements present but neutralized so old pulse is disabled */
.sidebar a.report-link::before,
.sidebar a.report-link::after,
.sidebar a.moderator-link::before,
.sidebar a.moderator-link::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 0%;
  height: 0%;
  transform: translate(-50%,-50%) scale(1);
  border-radius: 16px;
  pointer-events: none;
  z-index: -2;
  background: transparent;
  opacity: 0;
  filter: blur(0px);
  will-change: transform, opacity;
}

/* remove keyframe animations by not using them - old pulse cleared */

/* slight uplift/border while hovered
   only the new stronger blue glow is applied on hover/focus
*/
.sidebar a.report-link:hover,
.sidebar a.report-link:focus,
.sidebar a.moderator-link:hover,
.sidebar a.moderator-link:focus {
  transform: translateY(-2px);
  border: 1px solid rgba(122,44,212,0.12);
  /* NEW STRONG NEON BLUE GLOW for high contrast (user requested #00CFFF) */
  box-shadow: 0 0 20px #00CFFF, 0 0 40px #00CFFF;
  outline: none;
}

/* dark-mode tweaks for any small adjustments */
body.dark .sidebar a.report-link:hover,
body.dark .sidebar a.report-link:focus,
body.dark .sidebar a.moderator-link:hover,
body.dark .sidebar a.moderator-link:focus {
  /* keep same neon blue but slightly toned so it's not blinding in dark mode */
  box-shadow: 0 0 20px rgba(0,204,255,0.95), 0 0 40px rgba(0,204,255,0.7);
}

/* ===========================
   Main layout / filter / items
   =========================== */
main { max-width:1000px; margin:25px auto; padding:0 20px; }
h2 { 
  font-weight:700; 
  color:#0D3B66; 
  margin-bottom:20px; 
  font-size:1.75rem;
  position: relative;
  display: inline-block;
  padding-bottom: 8px;
}
h2::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 60px;
  height: 4px;
  background: linear-gradient(90deg, #00A6FB, #2575fc);
  border-radius: 2px;
}

/* Filter/Search */
#filterSection { 
  margin-bottom:20px; 
  display:flex; 
  justify-content:flex-end; 
  gap:10px; 
  flex-wrap:wrap; 
  background: linear-gradient(135deg, rgba(224,247,250,0.9), rgba(178,235,242,0.9)); 
  padding: 15px 20px; 
  border-radius:16px; 
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.3);
}
#searchInput { 
  flex:1; 
  padding:12px 18px; 
  border-radius:12px; 
  border:2px solid rgba(200,200,200,0.5); 
  font-size:1rem; 
  background: rgba(255,255,255,0.9);
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
#searchInput:focus {
  outline: none;
  border-color: #00A6FB;
  box-shadow: 0 0 0 3px rgba(0,166,251,0.15), 0 4px 12px rgba(0,0,0,0.1);
  background: white;
  transform: translateY(-1px);
}
#filterCard { 
  display:flex; 
  align-items:center; 
  gap:10px; 
  background: linear-gradient(135deg, #6a11cb, #2575fc); 
  padding:12px 18px; 
  border-radius:12px; 
  color:white; 
  font-weight:600;
  box-shadow: 0 4px 15px rgba(106,17,203,0.3);
  transition: all 0.3s ease;
}
#filterCard:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(106,17,203,0.4);
}
#filterSelect { 
  padding:8px 12px; 
  border-radius:8px; 
  border:none; 
  font-size:0.95rem; 
  cursor:pointer; 
  background-color:rgba(255,255,255,0.95); 
  color:#0D3B66; 
  font-weight:600;
  transition: all 0.3s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
#filterSelect:hover {
  background-color: white;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  transform: translateY(-1px);
}
#filterSelect:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(255,255,255,0.3), 0 4px 10px rgba(0,0,0,0.15);
}

/* Items grid - fixed square cards */
#itemsContainer { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px; }
.item-card { 
  position:relative; 
  background: linear-gradient(145deg, #ffffff, #d0e7f9); 
  border-radius:16px; 
  overflow:hidden; 
  display:flex; 
  flex-direction:column; 
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
  opacity:0; 
  transform:translateY(20px); 
  min-height:360px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  border: 1px solid rgba(255,255,255,0.5);
}
.item-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 12px 30px rgba(0,0,0,0.15);
  border-color: rgba(0,166,251,0.3);
}
.item-card.loaded { opacity:1; transform:translateY(0);}
.item-card.loaded:hover { transform: translateY(-8px); }
.item-card img { 
  width:100%; 
  height:200px; 
  object-fit:cover; 
  opacity:0; 
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
  cursor: pointer; 
  display:block; 
  background: linear-gradient(90deg,#f0f4f8,#e8f4f8);
  position: relative;
}
.item-card img.loaded { opacity:1;}
.item-card img:hover {
  transform: scale(1.05);
  filter: brightness(1.1);
}
.item-info { 
  padding:18px; 
  flex-grow:1; 
  overflow:auto; 
}
.item-info h3 { 
  margin-bottom:8px; 
  font-weight:600; 
  color:#0D3B66;
  font-size:1.1rem;
  line-height:1.3;
}
.item-info p { 
  margin:4px 0; 
  font-size:0.95rem; 
  color:#555;
  line-height:1.5;
}
.item-info .upload-time { font-size:0.85rem; font-style:italic; color:#555; margin-top:8px; display:block; }
body.dark .item-info p { color: #e0e0e0; }
body.dark .item-info .upload-time { color: #cfcfcf; }
.card-buttons { display:flex; flex-direction:column; gap:0; }

/* Category badge */
.category-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  padding:7px 14px;
  border-radius: 999px;
  font-weight:700;
  font-size:0.75rem;
  color: white;
  box-shadow: 0 4px 14px rgba(0,0,0,0.2), 0 2px 6px rgba(0,0,0,0.1);
  opacity: 0.98;
  backdrop-filter: blur(8px);
  text-transform: none;
  border: 1px solid rgba(255,255,255,0.2);
  transition: all 0.3s ease;
  z-index: 10;
}
.category-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  opacity: 1;
}

/* Category colors */
.badge-electronics { background: linear-gradient(90deg,#2b76f6,#1e90ff); }
.badge-idcards { background: linear-gradient(90deg,#6a11cb,#8e44ad); }
.badge-academicitems { background: linear-gradient(90deg,#00b894,#008f5f); }
.badge-accessories { background: linear-gradient(90deg,#ff6b6b,#ff4757); }
.badge-personaldocuments { background: linear-gradient(90deg,#f6b93b,#f39c12); }
.badge-others { background: linear-gradient(90deg,#95a5a6,#7f8c8d); }
.badge-default { background: linear-gradient(90deg,#34495e,#2c3e50); }

/* Buttons in cards */
.contact-btn, .share-btn, .delete-btn { 
  border:none; 
  padding:14px; 
  cursor:pointer; 
  font-weight:600; 
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
  font-size:0.95rem;
  letter-spacing: 0.3px;
}
.contact-btn { 
  background: linear-gradient(90deg, #00A6FB, #2575fc); 
  color:white; 
  border-radius: 0; 
  box-shadow: 0 2px 8px rgba(0,166,251,0.2);
}
.contact-btn:hover { 
  background: linear-gradient(90deg, #6a11cb, #00c6ff); 
  transform: translateY(-2px); 
  box-shadow: 0 6px 20px rgba(0,166,251,0.35); 
}
.contact-btn:active {
  transform: translateY(0);
}
.share-btn { 
  background: linear-gradient(90deg, #25D366, #128C7E); 
  color:white; 
  border-radius: 0 0 16px 16px;
  box-shadow: 0 2px 8px rgba(37,211,102,0.2);
}
.delete-btn { 
  background: linear-gradient(90deg, #e74c3c, #c0392b); 
  color:white; 
  border-radius: 0; 
  display:none;
  box-shadow: 0 2px 8px rgba(231,76,60,0.2);
}
.delete-btn:hover { 
  background: linear-gradient(90deg, #c0392b, #a93226); 
  transform: translateY(-2px); 
  box-shadow: 0 6px 20px rgba(231,76,60,0.35);
}
.delete-btn:active {
  transform: translateY(0);
}
.moderator-mode .delete-btn { display:block; }
.moderator-mode .share-btn { border-radius: 0; }
.moderator-mode .delete-btn:last-child { border-radius: 0 0 16px 16px; }
.share-btn:hover { 
  background: linear-gradient(90deg, #128C7E, #075E54); 
  transform: translateY(-2px); 
  box-shadow: 0 6px 20px rgba(37,211,102,0.35);
}
.share-btn:active {
  transform: translateY(0);
}

/* Form */
form { 
  display:flex; 
  flex-direction:column; 
  background: linear-gradient(135deg, rgba(224,247,250,0.95), rgba(192,240,250,0.95), rgba(240,244,248,0.95)); 
  padding:30px; 
  border-radius:20px; 
  box-shadow:0 10px 30px rgba(0,0,0,0.12), 0 0 0 1px rgba(255,255,255,0.5); 
  margin-top:20px; 
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}
form label { 
  font-weight:600; 
  color:#0D3B66; 
  margin-bottom:8px; 
  font-size:0.95rem;
  display:block;
}
form input, form textarea, form select { 
  margin-bottom:18px; 
  padding:14px 16px; 
  font-size:1rem; 
  border-radius:12px; 
  border:2px solid rgba(200,200,200,0.5); 
  outline:none;
  background: rgba(255,255,255,0.9);
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  font-family: 'Roboto', sans-serif;
}
form input:focus, form textarea:focus, form select:focus {
  border-color: #00A6FB;
  box-shadow: 0 0 0 3px rgba(0,166,251,0.15), 0 4px 12px rgba(0,0,0,0.1);
  background: white;
  transform: translateY(-1px);
}
form textarea {
  resize: vertical;
  min-height: 120px;
  font-family: 'Roboto', sans-serif;
}
form select {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%230D3B66' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
  padding-right: 40px;
}
form button { 
  background: linear-gradient(90deg, #00A6FB, #2575fc); 
  color:white; 
  font-weight:600; 
  cursor:pointer; 
  transition: all 0.3s ease;
  padding:14px 24px;
  border: none;
  border-radius:12px;
  box-shadow: 0 4px 15px rgba(0,166,251,0.3);
  font-size:1rem;
  margin-top: 8px;
}
form button:hover { 
  background: linear-gradient(90deg, #6a11cb, #00c6ff); 
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,166,251,0.4);
}
form button:active {
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(0,166,251,0.3);
}

/* Footer */
footer { 
  text-align:center; 
  background: linear-gradient(135deg, #6a11cb, #2575fc); 
  color:white; 
  padding:20px 15px; 
  font-size:0.95rem; 
  margin-top:40px; 
  border-radius:16px 16px 0 0; 
  box-shadow: 0 -4px 15px rgba(0,0,0,0.1);
  position: relative;
  overflow: hidden;
}
footer::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: shine 3s infinite;
}
@keyframes shine {
  0% { left: -100%; }
  100% { left: 100%; }
}
footer p {
  position: relative;
  z-index: 1;
}

/* Modal base */
.modal { display:none; position:fixed; z-index:6000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); }
.modal.show { display:block; animation: fadeIn 0.4s ease forwards; }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

.modal-content { background:white; margin:10% auto; padding:25px; border-radius:12px; width:90%; max-width:400px; text-align:center; box-shadow:0 6px 15px rgba(0,0,0,0.25); transform: translateY(-20px); opacity:0; animation: slideFadeIn 0.4s forwards; position:relative; z-index:6001; }
@keyframes slideFadeIn { from {opacity:0; transform:translateY(-20px);} to {opacity:1; transform:translateY(0);} }

/* Contact modal positioned near item card */
.contact-modal-positioned { margin:0; position:fixed; }

/* Login modal */
.login-modal-content { 
  background:white; 
  margin:10% auto; 
  padding:35px; 
  border-radius:24px; 
  width:90%; 
  max-width:420px; 
  box-shadow:0 20px 60px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1); 
  transform: translateY(-20px); 
  opacity:0; 
  animation: slideFadeIn 0.4s forwards; 
  position:relative;
  backdrop-filter: blur(10px);
}
.login-modal-content h3 { 
  font-size:1.75rem; 
  margin-bottom:25px; 
  color:#0D3B66; 
  font-weight:700;
  text-align: center;
}
.login-form { 
  display:flex; 
  flex-direction:column; 
  gap:18px; 
  text-align:left; 
}
.login-form label { 
  font-weight:600; 
  color:#0D3B66; 
  font-size:0.95rem;
  margin-bottom: 4px;
}
.login-form input { 
  padding:14px 16px; 
  border-radius:10px; 
  border:2px solid rgba(200,200,200,0.5); 
  font-size:1rem; 
  transition: all 0.3s ease;
  background: rgba(250,250,250,0.9);
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.login-form input:focus {
  outline: none;
  border-color: #00A6FB;
  box-shadow: 0 0 0 3px rgba(0,166,251,0.15), 0 4px 12px rgba(0,0,0,0.1);
  background: white;
  transform: translateY(-1px);
}
.login-buttons { 
  display:flex; 
  gap:12px; 
  justify-content:flex-end; 
  margin-top:15px; 
}
.login-buttons button { 
  padding:12px 24px; 
  border-radius:10px; 
  border:none; 
  cursor:pointer; 
  font-weight:600; 
  transition:all 0.3s ease;
  font-size:0.95rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.login-buttons .login-submit-btn { 
  background:linear-gradient(90deg, #00A6FB, #2575fc); 
  color:white;
  box-shadow: 0 4px 15px rgba(0,166,251,0.3);
}
.login-buttons .login-submit-btn:hover { 
  background:linear-gradient(90deg, #6a11cb, #00c6ff); 
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,166,251,0.4);
}
.login-buttons .login-submit-btn:active {
  transform: translateY(0);
}
.login-buttons .login-cancel-btn { 
  background:linear-gradient(90deg, #e0e0e0, #d5d5d5); 
  color:#333;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.login-buttons .login-cancel-btn:hover { 
  background:linear-gradient(90deg, #d0d0d0, #c5c5c5); 
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.login-buttons .login-cancel-btn:active {
  transform: translateY(0);
}
.login-error {
  padding: 10px 12px;
  background: rgba(231,76,60,0.1);
  border-left: 4px solid #e74c3c;
  border-radius: 6px;
  animation: shake 0.4s ease;
}
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Logout button - 15% bigger, positioned in header */
.logout-btn { background:linear-gradient(90deg, #e74c3c, #c0392b); color:white; border:none; padding:11.5px 23px; border-radius:9.2px; cursor:pointer; font-weight:600; font-size:1.15rem; display:none; box-shadow:0 4px 15px rgba(0,0,0,0.2); transition:all 0.3s ease; }
.logout-btn.show { display:block; }
.logout-btn:hover { background:linear-gradient(90deg, #c0392b, #a93226); transform:translateY(-2px); }

/* Logout confirmation modal */
.logout-confirm-modal .modal-content { max-width:350px; }
.logout-confirm-buttons { 
  display:flex; 
  gap:12px; 
  justify-content:center; 
  margin-top:25px; 
}
.logout-confirm-buttons button { 
  padding:12px 28px; 
  border-radius:10px; 
  border:none; 
  cursor:pointer; 
  font-weight:600; 
  transition:all 0.3s ease;
  font-size:1rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.logout-confirm-buttons .confirm-yes { 
  background:linear-gradient(90deg, #e74c3c, #c0392b); 
  color:white;
  box-shadow: 0 4px 15px rgba(231,76,60,0.3);
}
.logout-confirm-buttons .confirm-yes:hover { 
  background:linear-gradient(90deg, #c0392b, #a93226); 
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(231,76,60,0.4);
}
.logout-confirm-buttons .confirm-yes:active {
  transform: translateY(0);
}
.logout-confirm-buttons .confirm-no { 
  background:linear-gradient(90deg, #e0e0e0, #d5d5d5); 
  color:#333;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.logout-confirm-buttons .confirm-no:hover { 
  background:linear-gradient(90deg, #d0d0d0, #c5c5c5); 
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.logout-confirm-buttons .confirm-no:active {
  transform: translateY(0);
}

/* Single item view modal */
.single-item-modal-content { background:white; margin:5% auto; padding:25px; border-radius:20px; width:90%; max-width:600px; box-shadow:0 10px 30px rgba(0,0,0,0.3); transform: translateY(-20px); opacity:0; animation: slideFadeIn 0.4s forwards; position:relative; max-height:90vh; overflow-y:auto; }
.single-item-close-btn { position:absolute; top:15px; right:20px; background:transparent; border:none; font-size:28px; color:#666; cursor:pointer; transition:all 0.3s ease; padding:5px 10px; }
.single-item-close-btn:hover { color:#E91E63; transform:rotate(90deg); }
.single-item-content { display:flex; flex-direction:column; gap:15px; }
.single-item-content img { width:100%; max-height:300px; object-fit:contain; border-radius:8px; }
.single-item-content h3 { color:#0D3B66; margin-top:10px; }

.modal button { 
  margin-top:15px; 
  background: linear-gradient(90deg, #00A6FB, #2575fc); 
  color:white; 
  border:none; 
  padding:12px 20px; 
  border-radius:10px; 
  cursor:pointer; 
  font-weight:600; 
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0,166,251,0.3);
  font-size:1rem;
}
.modal button:hover { 
  background: linear-gradient(90deg, #6a11cb, #00c6ff); 
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,166,251,0.4);
}
.modal button:active {
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(0,166,251,0.3);
}

/* Share modal specifics */
.share-modal-content { background:white; margin:8% auto; padding:30px; border-radius:20px; width:90%; max-width:420px; box-shadow:0 10px 30px rgba(0,0,0,0.3); transform: translateY(-20px); opacity:0; animation: slideFadeIn 0.4s forwards; position:relative; }
.share-modal-content h3 { font-size:1.5rem; margin-bottom:20px; color:#0D3B66; }
.share-close-btn { position:absolute; top:15px; right:20px; background:transparent; border:none; font-size:28px; color:#666; cursor:pointer; transition:all 0.3s ease; padding:5px 10px; }
.share-close-btn:hover { color:#E91E63; transform:rotate(90deg); }

/* Share options */
.share-options { display:flex; flex-direction:column; gap:12px; margin-top:20px; }
.share-option { 
  display:flex; 
  align-items:center; 
  gap:15px; 
  padding:16px 20px; 
  background: linear-gradient(135deg, rgba(249,249,249,0.95), rgba(232,244,248,0.95)); 
  border-radius:14px; 
  cursor:pointer; 
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
  border:2px solid transparent; 
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  position: relative;
  overflow: hidden;
}
.share-option::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 4px;
  background: linear-gradient(180deg, #2575fc, #6a11cb);
  transform: scaleY(0);
  transition: transform 0.3s ease;
}
.share-option:hover { 
  transform:translateX(8px); 
  box-shadow:0 8px 24px rgba(0,0,0,0.15), 0 0 0 1px rgba(37,117,252,0.2); 
  border-color:#2575fc;
  background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(240,248,255,0.98));
}
.share-option:hover::before {
  transform: scaleY(1);
}
.share-option:active {
  transform: translateX(4px);
}
.share-icon { width:40px; height:40px; display:flex; align-items:center; justify-content:center; border-radius:50%; font-size:22px; }
.share-option.whatsapp .share-icon { background:#25D366; color:white; }
.share-option.instagram .share-icon { background:linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); color:white; }
.share-option.twitter .share-icon { background:#1DA1F2; color:white; }
.share-option.email .share-icon { background:#EA4335; color:white; }
.share-option.copy .share-icon { background:linear-gradient(135deg, #667eea, #764ba2); color:white; }

/* Share text */
.share-text { flex:1; text-align:left; }
.share-text .share-title { font-weight:600; font-size:1.05rem; color:#0D3B66; margin-bottom:2px; }
.share-text .share-subtitle { font-size:0.85rem; color:#666; }
body.dark .share-text .share-title { color:#F0F4F8; }
body.dark .share-text .share-subtitle { color:#cfcfcf; }

/* Copied notification */
.copied-notification { position:fixed; bottom:30px; left:50%; transform:translateX(-50%); background:linear-gradient(90deg, #00A6FB, #2575fc); color:white; padding:12px 25px; border-radius:50px; box-shadow:0 4px 15px rgba(0,0,0,0.2); opacity:0; transition:opacity 0.3s ease; pointer-events:none; z-index:4000; font-weight:600; }
.copied-notification.show { opacity:1; }

/* ===========================
   IMAGE VIEWER (fixed medium size)
   - The container has fixed medium dimensions on desktop (800x600)
   - On smaller screens it becomes responsive (max-width: 90%, max-height: 80vh)
   - The image uses object-fit: contain so it fills that container without distortion
   =========================== */

/* modal backdrop */
.image-modal { display:none; position:fixed; z-index:5000; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.75); align-items:center; justify-content:center; padding:30px; }

/* show */
.image-modal.show { display:flex; animation: fadeIn 0.35s ease forwards; }

/* fixed medium viewer size on desktop:
   - width: 800px; height: 600px (user requested "medium size")
   - max-width/max-height ensure responsiveness on smaller screens
*/
.image-modal-content {
  background: white;
  padding: 14px;
  border-radius: 12px;
  width: 800px;           /* fixed medium width on desktop */
  height: 600px;          /* fixed medium height on desktop */
  max-width: 90%;
  max-height: 80vh;
  box-shadow: 0 20px 60px rgba(0,0,0,0.45);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
}

/* image element fills the view area while keeping aspect ratio
   since container is fixed, images of any upload size will display at the same viewer size
*/
.image-modal-content img {
  width: 100%;
  height: calc(100% - 56px); /* leave space for the Close button (approx) */
  object-fit: contain;       /* maintain aspect ratio, show whole image */
  border-radius: 8px;
  display:block;
}

/* Close button (not X) - adjusted color to be visible in light & dark */
.image-modal-content .image-close-btn {
  background: linear-gradient(90deg, #00CFFF, #007BBF);
  color: #fff;
  padding:10px 14px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  font-weight:700;
  align-self:center;
  box-shadow: 0 6px 20px rgba(0,204,255,0.18);
}
.image-modal-content .image-close-btn:hover { transform: scale(1.03); }

/* dark-mode viewer background */
body.dark .image-modal-content { background: #111; }

/* responsive smaller screens */
@media (max-width:900px){
  .image-modal-content { width: 720px; height: 540px; }
}
@media (max-width:720px){
  .image-modal-content { width: 90%; height: 70vh; }
  .image-modal-content img { height: calc(100% - 56px); }
}

/* Hidden sections helper */
#upload-section.hidden, #items-section.hidden, #filterSection.hidden { display:none; }
</style>
</head>
<body>

<!-- Persistent sidebar toggle -->
<button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle menu">‚ò∞</button>

<!-- Header -->
<header>
  <div class="header-left">
    <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
  </div>
  <h1>Lost & Found Campus Portal</h1>

  <div class="header-right">
    <!-- Logout Button -->
    <button id="logoutBtn" class="logout-btn" onclick="openLogoutConfirm()">Log Out</button>
    
    <!-- Theme toggle -->
    <div class="theme-toggle" onclick="toggleTheme()" role="button" aria-pressed="false" aria-label="Toggle theme">
      <div class="theme-slider day" id="themeSlider"></div>
      <div class="theme-option day active" id="dayMode">
        <span class="theme-icon">‚òÄ</span>
        <span>LIGHT MODE</span>
      </div>
      <div class="theme-option night" id="nightMode">
        <span class="theme-icon">üåô</span>
        <span>DARK MODE</span>
      </div>
    </div>
  </div>
</header>

<!-- Sidebar -->
<div id="sidebarMenu" class="sidebar" aria-hidden="true">
  <a href="#" class="report-link" onclick="event.preventDefault(); showSection('Report')">üìù Report Item</a>
  <hr style="border: 1px solid #004ea1; margin: 10px 0;">
  <a href="#" onclick="event.preventDefault(); showSection('All')">üì¶ All Items</a>
  <a href="#" onclick="event.preventDefault(); showSection('ID Cards')">üí≥ ID Cards</a>
  <a href="#" onclick="event.preventDefault(); showSection('Electronics')">üíª Electronics</a>
  <a href="#" onclick="event.preventDefault(); showSection('Academic Items')">üìö Academic Items</a>
  <a href="#" onclick="event.preventDefault(); showSection('Accessories')">üéí Accessories</a>
  <a href="#" onclick="event.preventDefault(); showSection('Personal Documents')">üóÇ Personal Documents</a>
  <a href="#" onclick="event.preventDefault(); showSection('Others')">üõç Others</a>
  <hr style="border: 1px solid #004ea1; margin: 10px 0;">
  <a href="#" class="moderator-link" onclick="event.preventDefault(); openLoginModal()">üîê Moderator Login</a>
</div>

<main>
  <!-- Filter / Search -->
  <div id="filterSection">
    <input type="text" id="searchInput" placeholder="üîç Search items...">
    <div id="filterCard">
      <label for="filterSelect">Sort Items:</label>
      <select id="filterSelect">
        <option value="newest">üïí Newest</option>
        <option value="oldest">üïí Oldest</option>
        <option value="az">üî§ A ‚Üí Z</option>
        <option value="za">üî§ Z ‚Üí A</option>
      </select>
    </div>
  </div>

  <!-- Items -->
  <section id="items-section">
    <h2 id="sectionTitle">Recently Found Items</h2>
    <div id="itemsContainer"></div>
  </section>

  <!-- Upload (Report) section -->
  <section id="upload-section" class="hidden">
    <h2>Report a Found Item</h2>
    <form id="uploadForm">
      <label>Item Name:</label>
      <input type="text" id="itemName" placeholder="Blue Backpack" required />
      <label>Description:</label>
      <textarea id="itemDescription" placeholder="Describe the item..." required></textarea>
      <label>Category:</label>
      <select id="itemCategory" required>
        <option value="">-- Select Category --</option>
        <option value="ID Cards">ID Cards</option>
        <option value="Electronics">Electronics</option>
        <option value="Academic Items">Academic Items</option>
        <option value="Accessories">Accessories</option>
        <option value="Personal Documents">Personal Documents</option>
        <option value="Others">Others</option>
      </select>
      <label>Pickup Location:</label>
      <input type="text" id="itemLocation" placeholder="Library Front Desk" required />
      <label>Contact Info:</label>
      <input type="text" id="contactInfo" placeholder="your.email@university.edu" required />
      <label>Upload Photo:</label>
      <input type="file" id="itemPhoto" accept="image/*" required />
      <button type="submit">Submit Item</button>
    </form>
  </section>
</main>

<!-- Footer -->
<footer>
  <p>¬©2025 Lost & Found Campus Portal | Made for Students by Students!</p>
</footer>

<!-- Contact modal -->
<div id="contactModal" class="modal" role="dialog" aria-modal="true">
  <div class="modal-content" role="document" aria-labelledby="contactTitle">
    <h3 id="contactTitle">Contact Finder</h3>
    <p id="contactDetails"></p>
    <p><em>Please bring valid proof before collecting your item.</em></p>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<!-- Share modal (only top-right "X") -->
<div id="shareModal" class="modal" role="dialog" aria-modal="true">
  <div class="share-modal-content" role="document" aria-labelledby="shareTitle">
    <button class="share-close-btn" onclick="closeShareModal()" aria-label="Close share dialog">√ó</button>
    <h3 id="shareTitle">Share Item</h3>
    <div class="share-options">
      <div class="share-option whatsapp" onclick="shareVia('whatsapp')">
        <div class="share-icon">üì±</div>
        <div class="share-text">
          <div class="share-title">WhatsApp</div>
          <div class="share-subtitle">Share via WhatsApp</div>
        </div>
      </div>
      <div class="share-option instagram" onclick="shareVia('instagram')">
        <div class="share-icon">üì∑</div>
        <div class="share-text">
          <div class="share-title">Instagram</div>
          <div class="share-subtitle">Share on Instagram</div>
        </div>
      </div>
      <div class="share-option twitter" onclick="shareVia('twitter')">
        <div class="share-icon">üê¶</div>
        <div class="share-text">
          <div class="share-title">X (Twitter)</div>
          <div class="share-subtitle">Share on X</div>
        </div>
      </div>
      <div class="share-option email" onclick="shareVia('email')">
        <div class="share-icon">‚úâ</div>
        <div class="share-text">
          <div class="share-title">Email</div>
          <div class="share-subtitle">Share via Email</div>
        </div>
      </div>
      <div class="share-option copy" onclick="shareVia('copy')">
        <div class="share-icon">üîó</div>
        <div class="share-text">
          <div class="share-title">Copy Link</div>
          <div class="share-subtitle">Copy to clipboard</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Image viewer (fixed medium size) -->
<div id="imageModal" class="image-modal" role="dialog" aria-modal="true">
  <div class="image-modal-content" role="document" aria-labelledby="imageTitle">
    <img id="imageModalImg" alt="Full-size item" src="" />
    <button class="image-close-btn" id="imageCloseBtn">Close</button>
  </div>
</div>

<!-- Copied notification -->
<div id="copiedNotification" class="copied-notification">‚úì Link copied to clipboard!</div>

<!-- Login Modal -->
<div id="loginModal" class="modal" role="dialog" aria-modal="true">
  <div class="login-modal-content" role="document">
    <h3>Moderator Login</h3>
    <form class="login-form" id="loginForm" onsubmit="event.preventDefault(); handleLogin();">
      <label for="loginUsername">Username:</label>
      <input type="text" id="loginUsername" required autocomplete="username" />
      <label for="loginPassword">Password:</label>
      <input type="password" id="loginPassword" required autocomplete="current-password" />
      <div class="login-error" id="loginError">Wrong Username or Password. Try Again!</div>
      <div class="login-buttons">
        <button type="button" class="login-cancel-btn" onclick="closeLoginModal()">Cancel</button>
        <button type="submit" class="login-submit-btn">Login</button>
      </div>
    </form>
  </div>
</div>

<!-- Logout Confirmation Modal -->
<div id="logoutConfirmModal" class="modal logout-confirm-modal" role="dialog" aria-modal="true">
  <div class="modal-content" role="document">
    <h3>Logout Confirmation</h3>
    <p>Do you want to log out?</p>
    <div class="logout-confirm-buttons">
      <button class="confirm-no" onclick="closeLogoutConfirm()">No</button>
      <button class="confirm-yes" onclick="handleLogout()">Yes</button>
    </div>
  </div>
</div>

<!-- Single Item View Modal (for shared URLs) -->
<div id="singleItemModal" class="modal" role="dialog" aria-modal="true">
  <div class="single-item-modal-content" role="document">
    <button class="single-item-close-btn" onclick="closeSingleItemModal()" aria-label="Close">√ó</button>
    <div class="single-item-content" id="singleItemContent">
      <!-- Content will be dynamically inserted -->
    </div>
  </div>
</div>

<script>
/* ================
   JavaScript with inline comments
   - Fixed image display
   - Image viewer opens medium fixed-size viewer (800x600 desktop)
   - Close button provided (not X)
   - Dark-mode support included
   - Existing features preserved
   ================ */

/* DOM refs */
const itemsContainer = document.getElementById('itemsContainer');
const modal = document.getElementById('contactModal');
const contactDetails = document.getElementById('contactDetails');
const uploadSection = document.getElementById('upload-section');
const itemsSection = document.getElementById('items-section');
const sectionTitle = document.getElementById('sectionTitle');
const uploadForm = document.getElementById('uploadForm');
const filterSection = document.getElementById('filterSection');
const filterSelect = document.getElementById('filterSelect');
const searchInput = document.getElementById('searchInput');
const sidebarMenu = document.getElementById('sidebarMenu');
const themeSlider = document.getElementById('themeSlider');
const shareModal = document.getElementById('shareModal');
const copiedNotification = document.getElementById('copiedNotification');
const sidebarToggle = document.getElementById('sidebarToggle');

const imageModal = document.getElementById('imageModal');
const imageModalImg = document.getElementById('imageModalImg');
const imageCloseBtn = document.getElementById('imageCloseBtn');

let currentCategory = "All";
let currentShareItem = null;
let isModeratorLoggedIn = false;
let currentContactModalCard = null;
const loginModal = document.getElementById('loginModal');
const logoutBtn = document.getElementById('logoutBtn');
const logoutConfirmModal = document.getElementById('logoutConfirmModal');
const singleItemModal = document.getElementById('singleItemModal');
const singleItemContent = document.getElementById('singleItemContent');

/* Sidebar toggles */
function openMenu(){ sidebarMenu.classList.add('open'); sidebarMenu.setAttribute('aria-hidden','false'); }
function closeMenu(){ sidebarMenu.classList.remove('open'); sidebarMenu.setAttribute('aria-hidden','true'); }
function toggleMenu(){ if(sidebarMenu.classList.contains('open')) closeMenu(); else openMenu(); }
sidebarToggle.addEventListener('click', toggleMenu);

/* Contact modal display - positioned near item card */
function contactUploader(contactInfo, cardElement){
  currentContactModalCard = cardElement;
  const safeContact = contactInfo ? escapeHtml(String(contactInfo)) : 'No contact provided';
  
  // Create clickable link - compatible with all devices
  let contactHtml = `You can reach the finder at:<br><strong>`;
  if(isPhoneNumber(contactInfo)){
    // Open call app (works on mobile devices; on desktop may copy or prompt)
    const phoneNumber = String(contactInfo).replace(/\s/g,'');
    const telLink = `tel:${phoneNumber}`;
    contactHtml += `<a href="${telLink}" style="color:#00A6FB; text-decoration:none; cursor:pointer;" onclick="event.preventDefault(); window.location.href='${telLink}'; return false;">${safeContact}</a>`;
  } else if(isEmail(contactInfo)){
    // Open Gmail (app on mobile, web on desktop/tablet)
    const emailAddress = String(contactInfo).trim();
    const gmailUrl = getGmailUrl(emailAddress);
    if(isMobileDevice()){
      // On mobile, use onclick to handle app/web fallback
      contactHtml += `<a href="${gmailUrl}" style="color:#00A6FB; text-decoration:none; cursor:pointer;" onclick="event.preventDefault(); openGmail('${escapeHtml(emailAddress)}'); return false;">${safeContact}</a>`;
    } else {
      // On desktop/tablet, open in new tab
      contactHtml += `<a href="${gmailUrl}" target="_blank" style="color:#00A6FB; text-decoration:none; cursor:pointer;">${safeContact}</a>`;
    }
  } else {
    contactHtml += safeContact;
  }
  contactHtml += `</strong>`;
  
  contactDetails.innerHTML = contactHtml;
  
  // Position modal directly in front of the clicked card
  const modalContent = modal.querySelector('.modal-content');
  if(cardElement){
    const rect = cardElement.getBoundingClientRect(); // getBoundingClientRect already gives viewport coordinates
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;
    const modalWidth = 400; // max-width of modal
    const cardCenterX = rect.left + rect.width / 2;
    
    // Center the modal horizontally with the card (using viewport coordinates since we use position: fixed)
    let leftPos = cardCenterX - (modalWidth / 2);
    
    // Adjust if modal would go off screen on the right
    if(leftPos + modalWidth > viewportWidth - 20){
      leftPos = viewportWidth - modalWidth - 20;
    }
    // Adjust if modal would go off screen on the left
    if(leftPos < 20){
      leftPos = 20;
    }
    
    // Position vertically: try to center over the card, but adjust if needed
    const modalHeight = 200; // approximate height
    let topPos = rect.top + (rect.height / 2) - (modalHeight / 2);
    
    // If modal would go above viewport, position it below the card
    if(topPos < 20){
      topPos = rect.bottom + 15;
    }
    // If modal would go below viewport, position it above the card
    else if(topPos + modalHeight > viewportHeight - 20){
      topPos = rect.top - modalHeight - 15;
      // If still doesn't fit above, position it below
      if(topPos < 20){
        topPos = rect.bottom + 15;
      }
    }
    
    modalContent.style.position = 'fixed'; // Use fixed to ensure it's relative to viewport and above all content
    modalContent.style.top = topPos + 'px';
    modalContent.style.left = leftPos + 'px';
    modalContent.style.margin = '0';
    modalContent.style.transform = 'translateY(0)';
    modalContent.style.maxWidth = modalWidth + 'px';
    modalContent.style.zIndex = '6002'; // Highest z-index to ensure it's in front of everything
    modalContent.classList.add('contact-modal-positioned');
  } else {
    modalContent.style.position = '';
    modalContent.style.top = '';
    modalContent.style.left = '';
    modalContent.style.margin = '10% auto';
    modalContent.style.transform = '';
    modalContent.style.maxWidth = '';
    modalContent.style.zIndex = '';
    modalContent.classList.remove('contact-modal-positioned');
  }
  
  modal.classList.add('show');
}
function closeModal(){ 
  modal.classList.remove('show'); 
  currentContactModalCard = null;
  const modalContent = modal.querySelector('.modal-content');
  modalContent.classList.remove('contact-modal-positioned');
  modalContent.style.position = '';
  modalContent.style.top = '';
  modalContent.style.left = '';
  modalContent.style.margin = '10% auto';
  modalContent.style.transform = '';
  modalContent.style.maxWidth = '';
  modalContent.style.zIndex = '';
}

/* Check if string is phone number */
function isPhoneNumber(str){
  if(!str) return false;
  const cleaned = String(str).replace(/\s/g,'');
  return /^[\d\+\-\(\)]{7,15}$/.test(cleaned);
}

/* Check if string is email */
function isEmail(str){
  if(!str) return false;
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(str).trim());
}

/* Detect if device is mobile/tablet */
function isMobileDevice(){
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
         (typeof window.orientation !== 'undefined') || 
         (navigator.maxTouchPoints && navigator.maxTouchPoints > 2);
}

/* Detect iOS device */
function isIOS(){
  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
}

/* Detect Android device */
function isAndroid(){
  return /Android/.test(navigator.userAgent);
}

/* Get Gmail URL based on device - opens Gmail app on mobile, web on desktop */
function getGmailUrl(email){
  const encodedEmail = encodeURIComponent(email);
  
  if(isIOS()){
    // iOS: Try Gmail app first, fallback to web
    return `googlegmail://co?to=${encodedEmail}`;
  } else if(isAndroid()){
    // Android: Use Intent URL with web fallback
    const webFallback = `https://mail.google.com/mail/?view=cm&to=${encodedEmail}`;
    return `intent://send?to=${encodedEmail}#Intent;scheme=mailto;package=com.google.android.gm;S.browser_fallback_url=${encodeURIComponent(webFallback)};end`;
  } else {
    // Desktop/Tablet: Use web Gmail
    return `https://mail.google.com/mail/?view=cm&to=${encodedEmail}`;
  }
}

/* Open Gmail with fallback handling */
function openGmail(email){
  const gmailUrl = getGmailUrl(email);
  
  if(isIOS() || isAndroid()){
    // For mobile, try app first, then fallback to web after timeout
    const webGmailUrl = `https://mail.google.com/mail/?view=cm&to=${encodeURIComponent(email)}`;
    let fallbackTriggered = false;
    
    const fallbackTimer = setTimeout(() => {
      if(!fallbackTriggered){
        fallbackTriggered = true;
        window.location.href = webGmailUrl;
      }
    }, 500);
    
    window.location.href = gmailUrl;
    
    // Clear timeout if app opens successfully (user interaction)
    document.addEventListener('visibilitychange', function handler(){
      if(document.hidden){
        clearTimeout(fallbackTimer);
        fallbackTriggered = true;
      }
      document.removeEventListener('visibilitychange', handler);
    });
  } else {
    // Desktop: open in new tab
    window.open(gmailUrl, '_blank');
  }
}

/* Share modal */
function openShareModal(item){
  currentShareItem = item;
  shareModal.classList.add('show');
}
function closeShareModal(){ shareModal.classList.remove('show'); currentShareItem = null; }

/* Share actions */
function shareVia(platform){
  if(!currentShareItem) return;
  if(!currentShareItem.id) currentShareItem.id = 'item_' + Date.now() + '_' + Math.random().toString(36).substr(2,9);
  
  const itemText = `Found Item: ${currentShareItem.name}\n${currentShareItem.description}\nLocation: ${currentShareItem.location}\nContact: ${currentShareItem.contact}`;
  const baseUrl = window.location.origin + window.location.pathname;
  const itemUrl = baseUrl + '?item=' + encodeURIComponent(currentShareItem.id);
  const shareText = itemText + '\n\nView item: ' + itemUrl;
  
  switch(platform){
    case 'whatsapp':
      window.open(`https://wa.me/?text=${encodeURIComponent(shareText)}`, '_blank');
      break;
    case 'instagram':
      alert('Instagram sharing works best through the mobile app. Please use the copy link option and paste in Instagram DM or Story!');
      break;
    case 'twitter':
      window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(itemText)}&url=${encodeURIComponent(itemUrl)}`, '_blank');
      break;
    case 'email':
      window.location.href = `mailto:?subject=${encodeURIComponent('Found Item: ' + currentShareItem.name)}&body=${encodeURIComponent(shareText)}`;
      break;
    case 'copy':
      navigator.clipboard.writeText(itemUrl).then(()=>{
        copiedNotification.classList.add('show');
        setTimeout(()=>{copiedNotification.classList.remove('show');},2500);
      }).catch(()=>{
        alert('Failed to copy. Please copy manually:\n\n'+itemUrl);
      });
      break;
  }
  if(platform !== 'instagram') closeShareModal();
}

/* Close modals when clicking backdrop */
window.onclick = e => {
  if(e.target === modal) closeModal();
  if(e.target === shareModal) closeShareModal();
  if(e.target === imageModal) closeImageModal();
  if(e.target === loginModal) closeLoginModal();
  if(e.target === logoutConfirmModal) closeLogoutConfirm();
  if(e.target === singleItemModal) closeSingleItemModal();
};

/* Theme toggle logic */
function toggleTheme(){ const isDark = document.body.classList.contains('dark'); setTheme(isDark ? 'light' : 'dark'); }
function setTheme(theme){
  const dayMode = document.getElementById('dayMode');
  const nightMode = document.getElementById('nightMode');
  if(theme === 'dark'){
    document.body.classList.add('dark');
    dayMode.classList.remove('active');
    nightMode.classList.add('active');
    themeSlider.classList.remove('day');
    themeSlider.classList.add('night');
    localStorage.setItem('theme','dark');
    document.querySelector('.theme-toggle').setAttribute('aria-pressed','true');
  } else {
    document.body.classList.remove('dark');
    nightMode.classList.remove('active');
    dayMode.classList.add('active');
    themeSlider.classList.remove('night');
    themeSlider.classList.add('day');
    localStorage.setItem('theme','light');
    document.querySelector('.theme-toggle').setAttribute('aria-pressed','false');
  }
}
const savedTheme = localStorage.getItem('theme') || 'light';
setTheme(savedTheme);

/* Section switching */
function showSection(category){
  closeMenu();
  if(category === "Report"){
    uploadSection.classList.remove("hidden");
    itemsSection.classList.add("hidden");
    filterSection.classList.add("hidden");
    currentCategory = "Report";
  } else {
    uploadSection.classList.add("hidden");
    itemsSection.classList.remove("hidden");
    filterSection.classList.remove("hidden");
    currentCategory = category || "All";
    sectionTitle.textContent = (currentCategory === "All") ? "Recently Found Items" : currentCategory + " Items";
    loadItems();
  }
}

/* Helpers */
function escapeHtml(unsafe) {
  return String(unsafe).replace(/[&<"'>]/g, function(m) {
    return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m];
  });
}
function normalizeCategory(str){ if(!str) return ''; return String(str).trim().toLowerCase(); }
function getBadgeClass(category){
  const n = normalizeCategory(category);
  if(n.includes('electro')) return 'badge-electronics';
  if(n.includes('id') || n.includes('card')) return 'badge-idcards';
  if(n.includes('academic')) return 'badge-academicitems';
  if(n.includes('accessor')) return 'badge-accessories';
  if(n.includes('personal') || n.includes('document')) return 'badge-personaldocuments';
  if(n.includes('other')) return 'badge-others';
  return 'badge-default';
}

/* Date with seconds */
function formatDate(ts){
  const d = new Date(ts || Date.now());
  const dd = String(d.getDate()).padStart(2,'0');
  const mm = String(d.getMonth()+1).padStart(2,'0');
  const yyyy = d.getFullYear();
  let hours = d.getHours();
  const minutes = String(d.getMinutes()).padStart(2,'0');
  const seconds = String(d.getSeconds()).padStart(2,'0');
  const ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12;
  hours = hours ? hours : 12;
  return `${dd}/${mm}/${yyyy} ${hours}:${minutes}:${seconds} ${ampm}`;
}

/* Placeholder inline SVG data URI to avoid broken image icons */
const PLACEHOLDER_SVG = encodeURIComponent(
  `<svg xmlns='http://www.w3.org/2000/svg' width='800' height='500' viewBox='0 0 800 500'>
    <defs><linearGradient id='g' x1='0' x2='1'><stop offset='0' stop-color='#e6eefb'/><stop offset='1' stop-color='#dfeeff'/></linearGradient></defs>
    <rect width='100%' height='100%' fill='url(#g)'/>
    <g fill='#9fb0d6' font-family='Roboto, sans-serif' font-size='28' text-anchor='middle'>
      <text x='50%' y='48%' fill='#9fb0d6'>No Image</text>
      <text x='50%' y='62%' fill='#b6c9e9' font-size='18'>Image not available</text>
    </g>
  </svg>`
);
const PLACEHOLDER_SRC = `data:image/svg+xml;charset=utf-8,${PLACEHOLDER_SVG}`;

/* Create item card (safe DOM creation) */
function createItemCard(item){
  const card = document.createElement('div');
  card.className = 'item-card loaded';
  if(!item.id) item.id = 'item_' + Date.now() + '_' + Math.random().toString(36).substr(2,9);
  card.setAttribute('data-item-id', item.id);

  // category badge
  const badge = document.createElement('div');
  badge.className = 'category-badge ' + getBadgeClass(item.category);
  badge.textContent = item.category || 'Others';
  card.appendChild(badge);

  // image element with onerror fallback and click-to-open
  const img = document.createElement('img');
  img.alt = item.name || 'Item photo';
  img.src = item.photo || PLACEHOLDER_SRC; // fallback if no photo
  img.setAttribute('translate','no'); // help prevent translate popup
  img.classList.add('notranslate');
  img.draggable = false;
  img.onerror = function(){
    if(this.src !== PLACEHOLDER_SRC) this.src = PLACEHOLDER_SRC;
  };
  img.onload = function(){ this.classList.add('loaded'); };

  // clicking image opens fixed-size viewer
  img.addEventListener('click', function(e){
    e.preventDefault();
    e.stopPropagation();
    openImageModal(item.photo || PLACEHOLDER_SRC, item.name || 'Item photo');
  });

  // info block
  const info = document.createElement('div');
  info.className = 'item-info';
  const title = document.createElement('h3');
  title.textContent = item.name || '';
  const desc = document.createElement('p');
  desc.textContent = item.description || '';
  const loc = document.createElement('p');
  loc.textContent = `Pickup Location: ${item.location || ''}`;
  const timeP = document.createElement('p');
  timeP.className = 'upload-time';
  timeP.textContent = `Uploaded On: ${formatDate(item.timestamp || Date.now())}`;

  info.appendChild(title);
  info.appendChild(desc);
  info.appendChild(loc);
  info.appendChild(timeP);

  // buttons
  const btnWrap = document.createElement('div');
  btnWrap.className = 'card-buttons';

  const contactBtn = document.createElement('button');
  contactBtn.className = 'contact-btn';
  contactBtn.textContent = 'Contact Finder';
  contactBtn.addEventListener('click', ()=> contactUploader(item.contact, card));

  const shareBtn = document.createElement('button');
  shareBtn.className = 'share-btn';
  shareBtn.textContent = 'üì§ Share Item';
  shareBtn.addEventListener('click', ()=> openShareModal(item));

  const deleteBtn = document.createElement('button');
  deleteBtn.className = 'delete-btn';
  deleteBtn.textContent = 'üóë Delete';
  deleteBtn.addEventListener('click', ()=> deleteItem(item.id));

  btnWrap.appendChild(contactBtn);
  btnWrap.appendChild(shareBtn);
  btnWrap.appendChild(deleteBtn);

  card.appendChild(img);
  card.appendChild(info);
  card.appendChild(btnWrap);

  return card;
}

/* Load items */
function loadItems(){
  const items = JSON.parse(localStorage.getItem('foundItems')) || [];
  const searchTerm = (searchInput.value || '').toLowerCase().trim();
  itemsContainer.innerHTML = '';

  // Add IDs to items that don't have them
  items.forEach((item, index) => {
    if(!item.id) {
      item.id = 'item_' + (item.timestamp || Date.now()) + '_' + index;
    }
  });
  // Save back with IDs
  localStorage.setItem('foundItems', JSON.stringify(items));

  const selectedCategoryNormalized = normalizeCategory(currentCategory);
  const filtered = items.filter(i => {
    const itemCat = normalizeCategory(i.category);
    const matchCategory = (selectedCategoryNormalized === 'all' || selectedCategoryNormalized === '' || selectedCategoryNormalized === 'report') ? true : (itemCat === selectedCategoryNormalized);
    const name = (i.name || '').toLowerCase();
    const desc = (i.description || '').toLowerCase();
    const matchSearch = (searchTerm === '') || name.includes(searchTerm) || desc.includes(searchTerm);
    return matchCategory && matchSearch;
  });

  const sortValue = filterSelect.value;
  filtered.sort((a,b)=>{
    if(sortValue === "newest") return (b.timestamp || 0) - (a.timestamp || 0);
    if(sortValue === "oldest") return (a.timestamp || 0) - (b.timestamp || 0);
    if(sortValue === "az") return (a.name || '').localeCompare(b.name || '');
    if(sortValue === "za") return (b.name || '').localeCompare(a.name || '');
    return 0;
  });

  if(filtered.length === 0){
    itemsContainer.innerHTML = "<p style='text-align:center; font-style:italic; margin-top:20px;'>No items found in this category. Be the first to report one!</p>";
    return;
  }

  filtered.forEach(item => {
    item.category = item.category || 'Others';
    const card = createItemCard(item);
    itemsContainer.appendChild(card);
  });
  
  // Apply moderator mode styling
  if(isModeratorLoggedIn){
    document.body.classList.add('moderator-mode');
  } else {
    document.body.classList.remove('moderator-mode');
  }
}

/* ===== IMAGE modal open/close ===== */
/* Opens viewer with fixed medium container; image will contain to that size */
function openImageModal(src, alt){
  imageModalImg.src = src || PLACEHOLDER_SRC;
  imageModalImg.alt = alt || 'Item image';
  imageModal.classList.add('show');
}

/* Close viewer (Close button or backdrop or ESC) */
function closeImageModal(){
  imageModal.classList.remove('show');
  setTimeout(()=>{ imageModalImg.src = ''; }, 300);
}
imageCloseBtn.addEventListener('click', closeImageModal);

/* ESC key closes viewer and other modals */
window.addEventListener('keydown', function(e){
  if(e.key === 'Escape'){
    if(imageModal.classList.contains('show')) closeImageModal();
    if(shareModal.classList.contains('show')) closeShareModal();
    if(modal.classList.contains('show')) closeModal();
    if(loginModal.classList.contains('show')) closeLoginModal();
    if(logoutConfirmModal.classList.contains('show')) closeLogoutConfirm();
    if(singleItemModal.classList.contains('show')) closeSingleItemModal();
  }
});

/* ===== MODERATOR LOGIN FUNCTIONS ===== */
function openLoginModal(){
  if(isModeratorLoggedIn) return;
  document.getElementById('loginError').classList.remove('show');
  document.getElementById('loginUsername').value = '';
  document.getElementById('loginPassword').value = '';
  loginModal.classList.add('show');
}

function closeLoginModal(){
  loginModal.classList.remove('show');
}

function handleLogin(){
  const username = document.getElementById('loginUsername').value.trim();
  const password = document.getElementById('loginPassword').value.trim();
  const errorDiv = document.getElementById('loginError');
  
  // Hide error initially
  errorDiv.classList.remove('show');
  
  if(username === 'SnpsuL&F' && password === 'Rockpapper+scissors@train5'){
    isModeratorLoggedIn = true;
    localStorage.setItem('moderatorLoggedIn', 'true');
    errorDiv.classList.remove('show'); // Make sure error is hidden on success
    closeLoginModal();
    logoutBtn.classList.add('show');
    document.body.classList.add('moderator-mode');
    loadItems(); // Reload to show delete buttons
    alert('Login successful! You now have moderator access.');
  } else if(username !== '' || password !== '') {
    // Only show error if user has entered something (not empty)
    errorDiv.classList.add('show');
  }
}

function openLogoutConfirm(){
  logoutConfirmModal.classList.add('show');
}

function closeLogoutConfirm(){
  logoutConfirmModal.classList.remove('show');
}

function handleLogout(){
  isModeratorLoggedIn = false;
  localStorage.removeItem('moderatorLoggedIn');
  closeLogoutConfirm();
  logoutBtn.classList.remove('show');
  document.body.classList.remove('moderator-mode');
  loadItems(); // Reload to hide delete buttons
}

function deleteItem(itemId){
  if(!isModeratorLoggedIn) return;
  if(!confirm('Are you sure you want to delete this item?')) return;
  
  const items = JSON.parse(localStorage.getItem('foundItems')) || [];
  const filtered = items.filter(item => item.id !== itemId);
  localStorage.setItem('foundItems', JSON.stringify(filtered));
  loadItems();
}

/* Check if moderator was logged in on page load */
function checkModeratorStatus(){
  const saved = localStorage.getItem('moderatorLoggedIn');
  if(saved === 'true'){
    isModeratorLoggedIn = true;
    logoutBtn.classList.add('show');
    document.body.classList.add('moderator-mode');
  }
}

/* ===== SINGLE ITEM VIEW (for shared URLs) ===== */
function openSingleItemModal(item){
  const itemHtml = `
    <img src="${item.photo || PLACEHOLDER_SRC}" alt="${escapeHtml(item.name || 'Item')}" onerror="this.src='${PLACEHOLDER_SRC}'" />
    <div class="category-badge ${getBadgeClass(item.category)}" style="position:relative; display:inline-block; margin-top:10px;">${escapeHtml(item.category || 'Others')}</div>
    <h3>${escapeHtml(item.name || '')}</h3>
    <p><strong>Description:</strong> ${escapeHtml(item.description || '')}</p>
    <p><strong>Pickup Location:</strong> ${escapeHtml(item.location || '')}</p>
    <p><strong>Contact:</strong> ${escapeHtml(item.contact || '')}</p>
    <p style="font-size:0.9rem; color:#666; margin-top:15px;"><em>Uploaded On: ${formatDate(item.timestamp || Date.now())}</em></p>
  `;
  singleItemContent.innerHTML = itemHtml;
  singleItemModal.classList.add('show');
}

function closeSingleItemModal(){
  singleItemModal.classList.remove('show');
  setTimeout(()=>{ singleItemContent.innerHTML = ''; }, 300);
  // Remove item parameter from URL
  const url = new URL(window.location);
  url.searchParams.delete('item');
  window.history.replaceState({}, '', url);
}

/* Check URL for item parameter on load */
function checkForSharedItem(){
  const urlParams = new URLSearchParams(window.location.search);
  const itemId = urlParams.get('item');
  if(itemId){
    const items = JSON.parse(localStorage.getItem('foundItems')) || [];
    const item = items.find(i => i.id === itemId);
    if(item){
      setTimeout(()=>{ openSingleItemModal(item); }, 500);
    }
  }
}

/* ===== Image file resize helper (reduces size to avoid localStorage QUOTA errors) ===== */
function resizeImageFileToDataURL(file, maxWidth = 1200, maxHeight = 1200, outputType = 'image/jpeg', quality = 0.8){
  return new Promise((resolve, reject) => {
    if(!file) return reject(new Error('No file provided'));
    const reader = new FileReader();
    reader.onerror = (err) => reject(err);
    reader.onload = () => {
      const img = new Image();
      img.onerror = (err) => reject(err);
      img.onload = () => {
        let { width, height } = img;
        // calculate scaling
        const ratio = Math.min(1, maxWidth / width, maxHeight / height);
        const targetWidth = Math.round(width * ratio);
        const targetHeight = Math.round(height * ratio);

        const canvas = document.createElement('canvas');
        canvas.width = targetWidth;
        canvas.height = targetHeight;
        const ctx = canvas.getContext('2d');
        // draw with white background for JPEG
        ctx.fillStyle = '#fff';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(img, 0, 0, targetWidth, targetHeight);
        try {
          const dataUrl = canvas.toDataURL(outputType, quality);
          resolve(dataUrl);
        } catch(err){
          reject(err);
        }
      };
      img.src = reader.result;
    };
    reader.readAsDataURL(file);
  });
}

/* ===== Form submit handling (robust: resize image -> store base64 -> reload items) ===== */
uploadForm.addEventListener('submit', async function(e){
  e.preventDefault();

  // find submit button and disable it while processing
  const submitBtn = uploadForm.querySelector('button[type="submit"]') || uploadForm.querySelector('button');
  if(submitBtn) submitBtn.disabled = true;

  try {
    const nameEl = document.getElementById('itemName');
    const descEl = document.getElementById('itemDescription');
    const categoryEl = document.getElementById('itemCategory');
    const locationEl = document.getElementById('itemLocation');
    const contactEl = document.getElementById('contactInfo');
    const photoInput = document.getElementById('itemPhoto');

    const name = nameEl?.value?.trim();
    const description = descEl?.value?.trim();
    const category = categoryEl?.value?.trim() || 'Others';
    const location = locationEl?.value?.trim();
    const contact = contactEl?.value?.trim();

    // validation
    if(!name || !description || !category || !location || !contact){
      alert('Please fill all required fields.');
      return;
    }
    if(!photoInput || !photoInput.files || photoInput.files.length === 0){
      alert('Please upload a photo.');
      return;
    }

    const file = photoInput.files[0];

    // Resize image and get a compressed base64 dataURL to reduce size
    let dataUrl;
    try {
      // resize to max 1200px and compress to JPEG quality 0.8
      dataUrl = await resizeImageFileToDataURL(file, 1200, 1200, 'image/jpeg', 0.8);
    } catch (resizeErr) {
      console.warn('Image resize failed, will try direct FileReader fallback:', resizeErr);
      // fallback: read original file as dataURL (might be large)
      dataUrl = await new Promise((res, rej) => {
        const r = new FileReader();
        r.onerror = () => rej(new Error('Failed to read file'));
        r.onload = () => res(r.result);
        r.readAsDataURL(file);
      });
    }

    // Build item object with unique ID
    const newItem = {
      id: 'item_' + Date.now() + '_' + Math.random().toString(36).substr(2,9),
      name,
      description,
      category,
      location,
      contact,
      photo: dataUrl,
      timestamp: Date.now()
    };

    // Save to localStorage
    const existing = JSON.parse(localStorage.getItem('foundItems')) || [];
    existing.push(newItem);

    try {
      localStorage.setItem('foundItems', JSON.stringify(existing));
    } catch(storageErr) {
      // handle quota errors explicitly and provide clear guidance
      console.error('localStorage setItem error:', storageErr);
      if (storageErr && (storageErr.name === 'QuotaExceededError' || storageErr.name === 'NS_ERROR_DOM_QUOTA_REACHED' || storageErr.code === 22)) {
        alert('Saving the image exceeded localStorage space. Try a smaller image (reduce resolution or file size) or clear some saved items.');
      } else {
        alert('An unexpected error occurred while saving the item. Check console for details.');
      }
      return;
    }

    // success path: reset form, show All, reload items
    uploadForm.reset();
    alert('Item reported successfully!');
    showSection('All');
    // small delay to allow section swap DOM changes
    setTimeout(() => loadItems(), 80);

  } catch(err) {
    console.error('Submit handler unexpected error:', err);
    alert('An unexpected error occurred while saving the item. See console for details.');
  } finally {
    if(submitBtn) submitBtn.disabled = false;
  }
});

/* Filter & Search */
filterSelect.addEventListener('change', loadItems);
searchInput.addEventListener('input', loadItems);

/* Initial load */
document.addEventListener('DOMContentLoaded', function(){
  checkModeratorStatus();
  checkForSharedItem();
  showSection('All');
  loadItems();
});
</script>
</body>
</html>
